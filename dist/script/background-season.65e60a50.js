"use strict";(self.webpackChunkcnblogs_theme=self.webpackChunkcnblogs_theme||[]).push([["background-season"],{"./src/components/background/season.js":
/*!*********************************************!*\
  !*** ./src/components/background/season.js ***!
  \*********************************************/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ main; }\n/* harmony export */ });\n/**\r\n * UPDATES AND DOCS AT: https://github.com/wangyang0210\r\n * https://www.cnblogs.com/wangyang0210/\r\n * @author: WangYang, wangyang.0210@foxmail.com\r\n * @Date 2022-09-03 01:18\r\n * ----------------------------------------------\r\n * @describe: 可以自定义下落物品的背景特效\r\n */\r\n\r\nfunction main(options) {\r\n    let SakuraList;\r\n    let img = new Image();\r\n    img.src = options.img;\r\n    let size = options.size;\r\n\r\n    function Sakura(x, y, s, r, fn) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.s = s;\r\n        this.r = r;\r\n        this.fn = fn;\r\n    }\r\n\r\n    Sakura.prototype.draw = function (cxt) {\r\n        cxt.save();\r\n        cxt.translate(this.x, this.y);\r\n        cxt.rotate(this.r);\r\n        cxt.drawImage(img, 0, 0,  size * this.s, size * this.s)\r\n        cxt.restore();\r\n    }\r\n    Sakura.prototype.update = function () {\r\n        this.x = this.fn.x(this.x, this.y);\r\n        this.y = this.fn.y(this.y, this.y);\r\n        this.r = this.fn.r(this.r);\r\n        if (this.x > window.innerWidth || this.x < 0 || this.y > window.innerHeight || this.y < 0) {\r\n            this.r = getRandom('fnr');\r\n            if (Math.random() > 0.4) {\r\n                this.x = getRandom('x');\r\n                this.y = 0;\r\n                this.s = getRandom('s');\r\n                this.r = getRandom('r');\r\n            } else {\r\n                this.x = window.innerWidth;\r\n                this.y = getRandom('y');\r\n                this.s = getRandom('s');\r\n                this.r = getRandom('r');\r\n            }\r\n        }\r\n    }\r\n\r\n    SakuraList = function () {\r\n        this.list = [];\r\n    }\r\n    SakuraList.prototype.push = function (sakura) {\r\n        this.list.push(sakura);\r\n    }\r\n    SakuraList.prototype.update = function () {\r\n        for (let i = 0, len = this.list.length; i < len; i++) {\r\n            this.list[i].update();\r\n        }\r\n    }\r\n    SakuraList.prototype.draw = function (cxt) {\r\n        for (let i = 0, len = this.list.length; i < len; i++) {\r\n            this.list[i].draw(cxt);\r\n        }\r\n    }\r\n    SakuraList.prototype.get = function (i) {\r\n        return this.list[i];\r\n    }\r\n    SakuraList.prototype.size = function () {\r\n        return this.list.length;\r\n    }\r\n\r\n    function getRandom(option) {\r\n        let ret, random;\r\n        switch (option) {\r\n            case 'x':\r\n                ret = Math.random() * window.innerWidth;\r\n                break;\r\n            case 'y':\r\n                ret = Math.random() * window.innerHeight;\r\n                break;\r\n            case 's':\r\n                ret = Math.random();\r\n                break;\r\n            case 'r':\r\n                ret = Math.random() * 6;\r\n                break;\r\n            case 'fnx':\r\n                random = -0.5 + Math.random();\r\n                ret = function (x, y) {\r\n                    return x + 0.5 * random - 1.7;\r\n                };\r\n                break;\r\n            case 'fny':\r\n                random = 1.5 + Math.random() * 0.7\r\n                ret = function (x, y) {\r\n                    return y + random;\r\n                };\r\n                break;\r\n            case 'fnr':\r\n                random = Math.random() * 0.03;\r\n                ret = function (r) {\r\n                    return r + random;\r\n                };\r\n                break;\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    function startSakura() {\r\n        requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame;\r\n        let canvas = document.createElement('canvas'), cxt;\r\n        canvas.height = window.innerHeight;\r\n        canvas.width = window.innerWidth;\r\n        canvas.setAttribute('style', 'position: fixed;left: 0;top: 0;pointer-events: none;');\r\n        canvas.setAttribute('id', 'canvas_sakura');\r\n        canvas.style.zIndex = '999999999999999999999999999999999999999999'\r\n        document.getElementsByTagName('body')[0].appendChild(canvas);\r\n        cxt = canvas.getContext('2d');\r\n        let sakuraList = new SakuraList();\r\n        for (let i = 0; i < 50; i++) {\r\n            let sakura, randomX, randomY, randomS, randomR, randomFnx, randomFny, randomFnR;\r\n            randomX = getRandom('x');\r\n            randomY = getRandom('y');\r\n            randomR = getRandom('r');\r\n            randomS = getRandom('s');\r\n            randomFnx = getRandom('fnx');\r\n            randomFny = getRandom('fny');\r\n            randomFnR = getRandom('fnr');\r\n            sakura = new Sakura(randomX, randomY, randomS, randomR, {\r\n                x: randomFnx,\r\n                y: randomFny,\r\n                r: randomFnR\r\n            });\r\n            sakura.draw(cxt);\r\n            sakuraList.push(sakura);\r\n        }\r\n       requestAnimationFrame(function fn () {\r\n            cxt.clearRect(0, 0, canvas.width, canvas.height);\r\n            sakuraList.update();\r\n            sakuraList.draw(cxt);\r\n            requestAnimationFrame(fn);\r\n        })\r\n    }\r\n\r\n    img.onload = function () {\r\n        startSakura();\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://cnblogs-theme/./src/components/background/season.js?")}}]);